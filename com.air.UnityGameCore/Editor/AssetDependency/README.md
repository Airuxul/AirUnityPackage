# 资源依赖查询工具

一个强大的Unity编辑器工具，用于分析和可视化资源之间的依赖关系。

## 功能特性

### 1. 资源依赖查询窗口 (AssetDependencyWindow)
- **UIToolkit实现**：现代化的用户界面
- **依赖查询**：查找指定资源依赖的所有资源
- **反向依赖查询**：查找依赖指定资源的所有资源
- **递归/非递归选项**：灵活控制查询深度
- **分组显示**：按文件类型自动分组显示结果
- **快捷操作**：一键选择或定位资源

#### 使用方法
1. 通过菜单 `Tools > 资源依赖查询工具` 打开窗口
2. 在"选择资源"字段中拖入或选择要分析的资源
3. 点击"查询依赖"查看该资源依赖的其他资源
4. 点击"查询反向依赖"查看哪些资源依赖该资源
5. 使用"递归查询"开关控制是否递归查找所有依赖

### 2. 资源依赖树形视图 (AssetDependencyTreeWindow)
- **层级展示**：以树形结构展示依赖关系
- **深度控制**：可设置最大分析深度（1-10层）
- **循环依赖检测**：自动检测并高亮显示循环依赖
- **文件大小显示**：可选显示每个资源的文件大小
- **搜索功能**：快速搜索树中的资源
- **导出功能**：将依赖树导出为文本文件

#### 使用方法
1. 通过菜单 `Tools > 资源依赖树形视图` 打开窗口
2. 选择要分析的资源
3. 设置最大深度和其他选项
4. 点击"重新分析"生成依赖树
5. 双击树节点快速定位资源
6. 右键菜单提供更多操作选项

### 3. 右键菜单快捷方式 (AssetDependencyContextMenu)
在Project窗口中右键点击任意资源，选择"资源依赖"子菜单：
- **查看依赖关系**：打开依赖查询窗口并自动加载选中资源
- **打印依赖到控制台**：快速在控制台输出依赖列表
- **打印反向依赖到控制台**：快速在控制台输出反向依赖列表

## 核心组件

### AssetDependencyAnalyzer
核心分析类，提供以下功能：
- `GetDependencies()` - 获取资源的所有依赖项
- `GetDirectDependencies()` - 获取资源的直接依赖项
- `GetReverseDependencies()` - 获取反向依赖
- `BuildDependencyTree()` - 构建依赖树结构
- `GetAssetInfo()` - 获取资源详细信息
- `FormatFileSize()` - 格式化文件大小显示

## 技术特点

### 命名规范
- 使用语义清晰的英文命名
- 类名使用名词，方法名使用动词
- 遵循C#命名约定（PascalCase、camelCase）

### 代码结构
- 单一职责原则：每个类专注于特定功能
- 模块化设计：分析逻辑与UI展示分离
- 注释完整：所有公共API都有详细的XML文档注释

### 异常处理
- 合理的空值检查
- 用户友好的错误提示
- 进度条显示长时间操作

### UIToolkit实现
- 使用C#代码动态生成UI
- 响应式布局设计
- 现代化的视觉效果
- 良好的交互体验

## 使用场景

1. **资源优化**：找出未使用的资源或冗余依赖
2. **资源清理**：删除资源前检查是否有其他资源依赖它
3. **依赖分析**：了解资源之间的复杂依赖关系
4. **打包优化**：分析AssetBundle依赖关系
5. **循环依赖检测**：发现并解决循环依赖问题

## 性能说明

- **依赖查询**：速度快，基于Unity内置API
- **反向依赖查询**：需要遍历所有资源，大型项目可能需要较长时间
- **树形分析**：深度越大耗时越长，建议设置合理的最大深度

## 扩展建议

可以基于此工具进一步扩展：
- 添加资源使用热力图
- 集成AssetBundle依赖分析
- 添加依赖图表可视化
- 支持批量分析和报告生成
- 添加依赖优化建议

## 许可与贡献

本工具遵循项目整体许可协议。欢迎提出改进建议或贡献代码。


